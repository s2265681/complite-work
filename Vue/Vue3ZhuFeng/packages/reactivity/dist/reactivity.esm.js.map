{
  "version": 3,
  "sources": ["../../shared/src/index.ts", "../src/reactive.ts"],
  "sourcesContent": ["// src/index.ts\n/**\n * \u5224\u65AD\u5BF9\u8C61\n */\nexport const isObject = (value) => {\n  return typeof value === \"object\" && value !== null;\n};\n/**\n * \u5224\u65AD\u51FD\u6570\n */\nexport const isFunction = (value) => {\n  return typeof value === \"function\";\n};\n/**\n * \u5224\u65AD\u5B57\u7B26\u4E32\n */\nexport const isString = (value) => {\n  return typeof value === \"string\";\n};\n/**\n * \u5224\u65AD\u6570\u5B57\n */\nexport const isNumber = (value) => {\n  return typeof value === \"number\";\n};\n/**\n * \u5224\u65AD\u6570\u7EC4\n */\nexport const isArray = Array.isArray;\n", "import { isObject } from \"@my-vue/shared\";\n// 1. \u4EE3\u7406\u5BF9\u8C61 \u4EE3\u7406\u4E00\u6B21\u5C31\u53EF\u4EE5\u4E86\n// 2. \u4EE3\u7406\u5BF9\u8C61\u4E2D\u7684\u67D0\u4E2A\u5C5E\u6027\u518D\u6B21\u88AB\u4EE3\u7406\uFF0C\u4F1A\u9020\u6210\u6027\u80FD\u95EE\u9898\n\n// \u7F13\u5B58\u54CD\u5E94\u5F0F\u5BF9\u8C61\n// const reactiveMap = new WeakMap();\nconst enum ReactiveFlags {\n  IS_REACTIVE = \"__v_isReactive\",\n}\nexport function reactive(target) {\n  // \u53EA\u80FD\u4EE3\u7406\u5BF9\u8C61\n  if (!isObject(target)) {\n    return target;\n  }\n\n  // \u5224\u65AD target \u662F\u5426\u88AB\u4EE3\u7406\u8FC7\u3002\u5982\u679C\u88AB\u4EE3\u7406\u8FC7\uFF0C\u5219\u76F4\u63A5\u8FD4\u56DE\u4EE3\u7406\u5BF9\u8C61\n  // const existing = reactiveMap.get(target);\n  // if (existing) {\n  //   return existing;\n  // }\n  if (target[ReactiveFlags.IS_REACTIVE]) {\n    return target;\n  }\n\n  const handler = {\n    // \u76D1\u542C\u5C5E\u6027\u8BBF\u95EE\u64CD\u4F5C\n    get(target, key, receiver) {\n      // \u8BBF\u95EE\u5230 __v_isReactive \u5C5E\u6027\u65F6\uFF0C\u8BF4\u660E\u6B64\u65F6\u7684 target \u5176\u5B9E\u662F\u4E00\u4E2A proxy \u5BF9\u8C61\uFF0C\u65E0\u9700\u518D\u88AB\u4EE3\u7406\n      if (key === ReactiveFlags.IS_REACTIVE) {\n        return true;\n      }\n      console.log(`${key}\u5C5E\u6027\u88AB\u8BBF\u95EE\uFF0C\u4F9D\u8D56\u6536\u96C6`);\n      return Reflect.get(target, key);\n    }, // \u76D1\u542C\u8BBE\u7F6E\u5C5E\u6027\u64CD\u4F5C\n    set(target, key, value, receiver) {\n      console.log(`${key}\u5C5E\u6027\u53D8\u5316\u4E86\uFF0C\u6D3E\u53D1\u66F4\u65B0`); // \u5F53\u5C5E\u6027\u7684\u65B0\u503C\u548C\u65E7\u503C\u4E0D\u540C\u65F6\uFF0C\u518D\u8FDB\u884C\u8BBE\u7F6E\n      if (target[key] !== value) {\n        const result = Reflect.set(target, key, value, receiver);\n        return result;\n      }\n    },\n  }; // \u5B9E\u4F8B\u5316\u4EE3\u7406\u5BF9\u8C61\n  const proxy = new Proxy(target, handler);\n\n  // \u5C06\u4EE3\u7406\u5BF9\u8C61\u8FDB\u884C\u7F13\u5B58\n  // reactiveMap.set(target, proxy);\n  return proxy;\n}\n"],
  "mappings": ";AAIO,IAAM,WAAW,CAAC,UAAU;AACjC,SAAO,OAAO,UAAU,YAAY,UAAU;AAChD;AAsBO,IAAM,UAAU,MAAM;;;ACnBtB,SAAS,SAAS,QAAQ;AAE/B,MAAI,CAAC,SAAS,MAAM,GAAG;AACrB,WAAO;AAAA,EACT;AAOA,MAAI,OAAO,kCAAyB,GAAG;AACrC,WAAO;AAAA,EACT;AAEA,QAAM,UAAU;AAAA;AAAA,IAEd,IAAIA,SAAQ,KAAK,UAAU;AAEzB,UAAI,QAAQ,oCAA2B;AACrC,eAAO;AAAA,MACT;AACA,cAAQ,IAAI,GAAG,iEAAe;AAC9B,aAAO,QAAQ,IAAIA,SAAQ,GAAG;AAAA,IAChC;AAAA;AAAA,IACA,IAAIA,SAAQ,KAAK,OAAO,UAAU;AAChC,cAAQ,IAAI,GAAG,iEAAe;AAC9B,UAAIA,QAAO,GAAG,MAAM,OAAO;AACzB,cAAM,SAAS,QAAQ,IAAIA,SAAQ,KAAK,OAAO,QAAQ;AACvD,eAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AACA,QAAM,QAAQ,IAAI,MAAM,QAAQ,OAAO;AAIvC,SAAO;AACT;",
  "names": ["target"]
}
